<div class="main">

  <div class="top-header">
    <div class="logo col">
      <img src="assets/images/common/logo-home.png" alt="">
    </div>
    <div class="col username">
    </div>
    <div class="col username">
      <div class="dp pc-only">{{user.Name[0]}}{{user.Surname[0]}}</div>
      <div class="name">
        <p>
          {{user.Name}} {{user.Surname}}
          <span class="status grade">{{user.Grade.Name}}</span>
        </p>
      </div>
    </div>
    <div class="col logout">
      <img src="assets/images/common/off.svg" (click)="signOut()" alt="log-off logo">
    </div>
  </div>

  <div class="public-questions">
    <app-public-questions *ngIf="studentsubjects && user" [user]="user" [subjects]="studentsubjects"></app-public-questions>
  </div>



  <div class="recent topic">
    <h1>
      My Subjects
    </h1>

   




    <mat-tab-group>
      <mat-tab *ngFor="let studentsubject of studentsubjects ; let i = index" [label]="studentsubject.Name"
        (click)="selectSubject(i)">
        <div class="recent topic" *ngIf="studentsubject.Lessons && studentsubject.Lessons.length ; else nodata">
          <h1>
            {{studentsubject.Name}} <span class="lessons-heading">Lessons</span>
          </h1>
          <div class="topics">

            <div *ngFor="let item of studentsubject.Lessons" class="topics">
              <div class="line pointer" (click)="readTopic(item)">

                <div class="text">
                  {{i+1}}. {{item.Tittle}}
                </div>

                <div class="action">
                  <a>
                    <span class="material-icons">
                      arrow_forward
                    </span>
                  </a>
                </div>
              </div>
            </div>
          </div>

        </div>



        <div class="recent topic" *ngIf="studentsubject.Tests && studentsubject.Tests.length">
          <h1>
            {{studentsubject.Name}} <span class="lessons-heading">Tests</span>
          </h1>
          <div class="topics">

            <div *ngFor="let item of studentsubject.Tests" class="topics">
              <div class="line pointer" (click)="takeTest(item)">

                <div class="text">
                  {{i+1}}. {{item.Name}}
                </div>

                <div class="action">
                  <a>
                    <span class="material-icons">
                      arrow_forward
                    </span>
                  </a>
                </div>
              </div>
            </div>
          </div>

        </div>


        <ng-template #nodata>
          <div class="nodata">
            <h1>
              No content found for this subject!
            </h1>
          </div>
        </ng-template>

      </mat-tab>
    </mat-tab-group>
  </div>


</div>


<div class="overlay" *ngIf="showModal"></div>

<div class="modal" *ngIf="showLocked">


  <div class="form">
    <p>
      <span class="important">Hi {{user.Name}}</span>, your account is temporarily locked due to pending payment of
      <strong *ngIf="user.Billing && user.Billing.length && user.Billing[0]">
        {{user.Billing[0].AmountDue | currency:'R'}} </strong>
    </p>

    <div class="file" *ngIf="!user.Billing[0].PayProof">
      <p>
        If you already paid , please upload the proof of payment
      </p>
      <input type="file" accept="image/*" (change)="imageChanged($event)">

    </div>

    <p *ngIf="user.Billing[0].PayProof">
      We are busy verifying your payment we will send you the email as soon as your account is activated.
    </p>
    <div class="actions">

      <div class="sign-out">
        <img src="assets/images/common/off.svg" alt="log-off logo">
        <a mat-button (click)="signOut()">
          sign-out
        </a>
      </div>
    </div>
  </div>
</div>


